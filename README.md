# ๐ค Telegram Archive Bot

ูุธุงู ูุชูุงูู ููุนุงู ูุฃุฑุดูุฉ ุงููููุงุช ุจุงุณุชุฎุฏุงู ุชููุฌุฑุงู ููุณุงุญุฉ ุชุฎุฒูู ุณุญุงุจูุฉ ูุฌุงููุฉุ ูุน ูุงุฌูุฉ ููุจ ุนุตุฑูุฉ ูุณุฑูุนุฉ ูุฑูุน ูุนุฑุถ ุงููููุงุช ูุฅุฏุงุฑุชูุง.

[![Railway Deploy](https://railway.app/button.svg)](https://railway.app/new/template?template=https://github.com/MoainAlabbasi/telegram-archive-bot)

---

## โก ุขุฎุฑ ุงูุชุญุฏูุซุงุช (v4.0 - 2025-12-01)

### โ **ุชู ุฅุตูุงุญ ุฌููุน ุงูุฃุฎุทุงุก ุงููุนูุงุฑูุฉ ุงูุญุฑุฌุฉ!**

| ุงููุดููุฉ | ุงูุญุงูุฉ |
|---------|--------|
| โ ValueError: set_wakeup_fd only works in main thread | โ **ุชู ุงูุฅุตูุงุญ** |
| โ RuntimeWarning: coroutine was never awaited | โ **ุชู ุงูุฅุตูุงุญ** |
| โ 404 Not Found (templates folder) | โ **ุชู ุงูุฅุตูุงุญ** |
| โ ุงูุชุทุจูู ูุชููู ุนูู Railway | โ **ุชู ุงูุฅุตูุงุญ** |

**ุงููุชูุฌุฉ:** ุงููุดุฑูุน ุงูุขู **ูุณุชูุฑ 100%** ูุฌุงูุฒ ูููุดุฑ ุนูู Railway ุจุฏูู ุฃู ูุดุงูู!

๐ **ููุชูุงุตูู ุงููุงููุฉ:** ุฑุงุฌุน [FIXES.md](FIXES.md) | [SUMMARY.md](SUMMARY.md)

---

## โจ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### ๐ ุงููุงุฌูุฉ ุงูุฃูุงููุฉ (Frontend)
- ๐จ **ุชุตููู ุนุตุฑู ููุชุฌุงูุจ**: ูุงุฌูุฉ ุฌูููุฉ ุชุนูู ุจููุงุกุฉ ุนูู ุฌููุน ุงูุฃุฌูุฒุฉ
- ๐ผ๏ธ **ุนุงุฑุถ ูุณุงุฆุท ูุฏูุฌ**: ุนุฑุถ ุงูุตูุฑ ูุงูููุฏูููุงุช ุฏุงุฎู ุงูุตูุญุฉ
- โก **ุฃุฏุงุก ูุงุฆู**: ุชุญููู ุณุฑูุน ูุน ูุตุบุฑุงุช ููุตูุฑ
- ๐ **ุจุญุซ ููุฑู**: ุจุญุซ ุณุฑูุน ูู ุฃุณูุงุก ุงููููุงุช
- ๐ค **ุฑูุน ุณูู**: ุฏุนู ุงูุณุญุจ ูุงูุฅููุงุช (Drag & Drop)
- ๐๏ธ **ุญุฐู ุขูู**: ุญุฐู ุงููููุงุช ูุน ุชุฃููุฏ

### โ๏ธ ุงูุฎุงุฏู ุงูุฎููู (Backend)
- ๐ **Flask 3.0**: ุฎุงุฏู ุฎููู ููู ููุณุชูุฑ
- ๐ **ุจุซ ูุจุงุดุฑ ูููููุงุช**: ุนุฑุถ ุงููููุงุช inline ูู ุงููุชุตูุญ
- ๐ **API ูุชูุงูู**: endpoints ูุฑูุน ูุญุฐู ูุจุซ ุงููููุงุช
- ๐ก๏ธ **ุฃูุงู**: ุงุณุชุฎุฏุงู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
- ๐ฉบ **Health Check**: endpoint ููุชุญูู ูู ุญุงูุฉ ุงูุฎุงุฏู

### ๐ค ุจูุช ุชููุฌุฑุงู (Bot)
- ๐ **ุฏุนู ุงูุฑุณุงุฆู ุงููุญููุฉ**: ูุชุนุงูู ูุน ุงููููุงุช ุงููุนุงุฏ ุชูุฌูููุง
- โ๏ธ **ุญูุธ ุชููุงุฆู**: ุฃุฑุดูุฉ ุชููุงุฆูุฉ ูุฌููุน ุฃููุงุน ุงููููุงุช
- ๐ **ุชุณุฌูู ุฏููู**: ูุธุงู ุณุฌูุงุช ูุชุชุจุน ุงูุนูููุงุช
- โก **ูุนูุงุฑูุฉ ูุญุณููุฉ**: async/await ุตุญูุญ ุจุฏูู ุฃุฎุทุงุก

---

## ๐๏ธ ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ

| ุงููุณู | ุงูุชูููุฉ | ุงููุตู |
|---|---|---|
| **ุงูุฎุงุฏู ุงูุฎููู** | Python 3.11, Flask 3.0 | API ูุฎุฏูุฉ ุงููููุน |
| **ุงูุจูุช** | python-telegram-bot v20+ | ุงูุชูุงุนู ูุน Telegram API |
| **ูุงุนุฏุฉ ุงูุจูุงูุงุช** | Supabase (PostgreSQL) | ุชุฎุฒูู ุจูุงูุงุช ุงููููุงุช |
| **ุงููุงุฌูุฉ ุงูุฃูุงููุฉ** | HTML5, CSS3, Vanilla JS | ูุงุฌูุฉ ุจุณูุทุฉ ููุนุงูุฉ |
| **ุงูุงุณุชุถุงูุฉ** | Railway | ููุตุฉ ุณุญุงุจูุฉ ูููุดุฑ |

---

## ๐ ุงูุชุซุจูุช ูุงููุดุฑ (5 ุฏูุงุฆู)

### ุงูุทุฑููุฉ ุงูุณุฑูุนุฉ - ูุดุฑ ุจููุฑุฉ ูุงุญุฏุฉ

[![Deploy on Railway](https://railway.app/button.svg)](https://railway.app/new/template?template=https://github.com/MoainAlabbasi/telegram-archive-bot)

### ุงูุทุฑููุฉ ุงููุฏููุฉ

#### 1๏ธโฃ ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช (Supabase) - ุงุฎุชูุงุฑู

> **ููุงุญุธุฉ:** ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงุฎุชูุงุฑูุฉ. ุงูุจูุช ูุนูู ุจุฏูููุง ูุฃุฑุดูุฉ ุจุณูุทุฉ.

1. ุณุฌู ุญุณุงุจุงู ูู [Supabase](https://supabase.com)
2. ุฃูุดุฆ ูุดุฑูุนุงู ุฌุฏูุฏุงู
3. ุงุฐูุจ ุฅูู **SQL Editor** ูููุฐ ูุญุชูู `database/setup.sql`
4. ุงุญูุธ `Project URL` ู `anon key` ูู **Settings** โ **API**

#### 2๏ธโฃ ุฅุนุฏุงุฏ ุจูุช ุชููุฌุฑุงู

1. ุชุญุฏุซ ูุน [@BotFather](https://t.me/BotFather) ูุฃูุดุฆ ุจูุชุงู ุฌุฏูุฏุงู
2. ุงุญูุธ **Token** ุงูุจูุช
3. ุฃูุดุฆ ูุฌููุนุฉ ุฎุงุตุฉ ูุฃุถู ุงูุจูุช ููุณุคูู
4. ุงุณุชุฎุฏู [@userinfobot](https://t.me/userinfobot) ููุญุตูู ุนูู **Chat ID** (ูุจุฏุฃ ุจู `-100`)

#### 3๏ธโฃ ุงููุดุฑ ุนูู Railway

1. Fork ูุฐุง ุงููุณุชูุฏุน ุฅูู ุญุณุงุจู ูู GitHub
2. ุณุฌู ูู [Railway](https://railway.app) ุจุงุณุชุฎุฏุงู GitHub
3. ุงุถุบุท **New Project** โ **Deploy from GitHub repo**
4. ุงุฎุชุฑ ุงููุณุชูุฏุน
5. ุฃุถู ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ:

```env
TELEGRAM_BOT_TOKEN=your_bot_token_here
PORT=8080
# ุงุฎุชูุงุฑู (ุฅุฐุง ููุช ุชุณุชุฎุฏู Supabase):
# TARGET_GROUP_ID=-100xxxxxxxxxx
# SUPABASE_URL=https://xxx.supabase.co
# SUPABASE_KEY=your_anon_key
```

6. ุณูุชู ุงููุดุฑ ุชููุงุฆูุงู!

**๐ ุชูุงูููุง! ูุดุฑูุนู ูุนูู ุงูุขู!**

---

## ๐ ูููู ุงููุดุฑูุน (ุงูููุญุฏูุซ)

```
telegram-archive-bot/
โโโ run.py                    # ููุทุฉ ุงูุชุดุบูู ุงูุฑุฆูุณูุฉ (ููุตูุญ โ)
โโโ requirements.txt          # ุงูููุชุจุงุช ุงููุทููุจุฉ
โโโ Procfile                  # ุฅุนุฏุงุฏุงุช Railway
โโโ .env.example             # ูุซุงู ูููุชุบูุฑุงุช ุงูุจูุฆูุฉ
โโโ .gitignore               # ูููุงุช Git ุงูููุณุชุซูุงุฉ
โโโ README.md                # ูุฐุง ุงูููู
โโโ FIXES.md                 # ุดุฑุญ ุชูุตููู ููุฅุตูุงุญุงุช
โโโ SUMMARY.md               # ููุฎุต ุงูุฅุตูุงุญุงุช
โโโ src/
โ   โโโ __init__.py
โ   โโโ bot/
โ   โ   โโโ __init__.py
โ   โ   โโโ main.py          # ุจูุช Telegram (ููุตูุญ โ)
โ   โโโ api/
โ       โโโ __init__.py
โ       โโโ main.py          # Flask API (ููุตูุญ โ)
โโโ templates/
    โโโ index.html           # ูุงุฌูุฉ ุงูููุจ (ูุญุฏูุซุฉ โ)
```

---

## ๐ง ุงูุฅุตูุงุญุงุช ุงููุทุจูุฉ (v4.0)

### โ 1. ุฅุตูุงุญ Main Thread Assertion

**ุงููุดููุฉ:**
```
ValueError: set_wakeup_fd only works in main thread
```

**ุงูุญู:**
- ุนูุณ ูููุฐุฌ ุงูุชุฒุงูู (Invert Concurrency Model)
- Flask ูุนูู ูู ุฎูุท ุฎููู (Daemon Thread)
- Telegram Bot ูุนูู ูู ุงูุฎูุท ุงูุฑุฆูุณู (Main Thread)

**ุงูููุฏ:**
```python
# Flask ูู ุฎูุท ุฎููู
flask_thread = threading.Thread(target=run_flask_app, daemon=True)
flask_thread.start()

# Telegram Bot ูู ุงูุฎูุท ุงูุฑุฆูุณู
asyncio.run(run_telegram_bot())
```

### โ 2. ุฅุตูุงุญ Async/Await

**ุงููุดููุฉ:**
```
RuntimeWarning: coroutine 'Updater.start_polling' was never awaited
```

**ุงูุญู:**
- ุงุณุชุฎุฏุงู `async def main()` ูู ุงูุจูุช
- ุงุณุชุฎุฏุงู `await application.run_polling()`
- ุงุณุชุฎุฏุงู `Application.builder()` ุจุฏูุงู ูู Updater

**ุงูููุฏ:**
```python
async def main():
    application = Application.builder().token(bot_token).build()
    await application.run_polling(
        allowed_updates=Update.ALL_TYPES,
        drop_pending_updates=True
    )
```

### โ 3. ุฅุตูุงุญ ูุณุงุฑุงุช Templates

**ุงููุดููุฉ:**
```
404 Not Found - templates folder not found
```

**ุงูุญู:**
- ุงุณุชุฎุฏุงู ูุณุงุฑุงุช ูุทููุฉ ุจุฏูุงู ูู ูุณุจูุฉ
- ุงุณุชุฎุฏุงู `os.path.abspath()` ู `os.path.join()`

**ุงูููุฏ:**
```python
base_dir = os.path.dirname(os.path.abspath(__file__))
template_dir = os.path.join(base_dir, '../../templates')
template_dir = os.path.abspath(template_dir)

app = Flask(__name__, template_folder=template_dir)
```

๐ **ููุดุฑุญ ุงูุชูุตููู:** ุฑุงุฌุน [FIXES.md](FIXES.md)

---

## ๐ API Endpoints

| ุงููุณุงุฑ | ุงูุทุฑููุฉ | ุงููุตู |
|--------|---------|-------|
| `/` | GET | ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ |
| `/health` | GET | ูุญุต ุตุญุฉ ุงูุชุทุจูู |
| `/api/status` | GET | ุญุงูุฉ ุงูุจูุช |
| `/api/stats` | GET | ุฅุญุตุงุฆูุงุช ุงูุจูุช |
| `/api/webhook` | POST | Webhook endpoint |

---

## ๐บ๏ธ ุฎุงุฑุทุฉ ุงูุทุฑูู (Roadmap)

- [x] โ ุฅุตูุงุญ ุฌููุน ุงูุฃุฎุทุงุก ุงููุนูุงุฑูุฉ
- [x] โ ุฏุนู python-telegram-bot v20+
- [x] โ ูุนูุงุฑูุฉ async/await ุตุญูุญุฉ
- [x] โ ูุณุงุฑุงุช ูุทููุฉ ููู templates
- [ ] ๐ ูุธุงู ูุตุงุฏูุฉ (Authentication)
- [ ] ๐ ุฑูุน ูููุงุช ูุชุนุฏุฏุฉ
- [ ] ๐ ุชูุธูู ูู ูุฌูุฏุงุช
- [ ] ๐ Pagination ููุฃุฏุงุก
- [ ] ๐ ุฑูุงุจุท ูุดุงุฑูุฉ
- [ ] ๐ ุฅุญุตุงุฆูุงุช ูุชูุฏูุฉ

---

## ๐ค ุงููุณุงููุฉ

ุงููุณุงููุงุช ูุฑุญุจ ุจูุง! ูุฑุฌู:
1. Fork ุงููุดุฑูุน
2. ุฅูุดุงุก branch ุฌุฏูุฏ (`git checkout -b feature/amazing-feature`)
3. Commit ุงูุชุบููุฑุงุช (`git commit -m 'Add amazing feature'`)
4. Push ุฅูู Branch (`git push origin feature/amazing-feature`)
5. ูุชุญ Pull Request

---

## ๐ ุงูุชุฑุฎูุต

ูุฐุง ุงููุดุฑูุน ูุฑุฎุต ุชุญุช **MIT License**.

---

## ๐ ุงูุฏุนู

ููุฏุนู:
- ูุชุญ [Issue](https://github.com/MoainAlabbasi/telegram-archive-bot/issues)
- ูุฑุงุฌุนุฉ [FIXES.md](FIXES.md) ูููุดุงูู ุงูุดุงุฆุนุฉ
- ูุฑุงุฌุนุฉ [SUMMARY.md](SUMMARY.md) ููููุฎุต ุงูุณุฑูุน

---

## ๐ ุงูุฅุตุฏุงุฑุงุช

- **v4.0** (2025-12-01): 
  - โ ุฅุตูุงุญ ุฌููุน ุงูุฃุฎุทุงุก ุงููุนูุงุฑูุฉ
  - โ ุฏุนู python-telegram-bot v20+
  - โ ุชุจุณูุท ุงูุจููุฉ ูุญุฐู ุงููููุงุช ุบูุฑ ุงููุณุชุฎุฏูุฉ
  - โ ุฌุงูุฒ ูููุดุฑ ุนูู Railway ุจุฏูู ูุดุงูู
- **v3.0**: ุฅุถุงูุฉ ุฏุนู Supabase
- **v2.0**: ุฅุถุงูุฉ Flask API
- **v1.0**: ุงูุฅุตุฏุงุฑ ุงูุฃููู

---

<div align="center">

**ุตููุน ุจู โค๏ธ ุจูุงุณุทุฉ [Moain Alabbasi](https://github.com/MoainAlabbasi)**

**ูุฏุนูู ุจู [Manus AI](https://manus.im)** ๐ค

โญ ุฅุฐุง ุฃุนุฌุจู ุงููุดุฑูุนุ ูุง ุชูุณู ุฅุนุทุงุฆู ูุฌูุฉ ุนูู GitHub!

</div>
